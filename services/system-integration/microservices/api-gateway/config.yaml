# API Gateway Configuration

environment: development
port: 8060

server:
  read_timeout: 15s
  write_timeout: 15s
  idle_timeout: 60s

jwt:
  secret_key: "change-me-in-production"
  token_duration: 15m
  refresh_duration: 168h # 7 days
  issuer: "ugjb-api-gateway"

rate_limit:
  enabled: true
  requests_per_min: 100
  burst_size: 20
  cleanup_interval: 1m

redis:
  host: "localhost"
  port: 6379
  password: ""
  db: 0

cors:
  allow_origins:
    - "*"
  allow_methods:
    - "GET"
    - "POST"
    - "PUT"
    - "PATCH"
    - "DELETE"
    - "OPTIONS"
  allow_headers:
    - "Origin"
    - "Content-Type"
    - "Accept"
    - "Authorization"
    - "X-Request-ID"
    - "Upgrade"
    - "Connection"
  expose_headers:
    - "Content-Length"
    - "X-Request-ID"
  allow_credentials: true
  max_age: 43200 # 12 hours

opa:
  enabled: true
  policy_path: "./policies"
  bundle_url: ""

# Backend microservices (internal Docker network)
services:
  project_management:
    base_url: "http://project-management:8004"
    timeout: 30s

  goal_management:
    base_url: "http://goal-management:8002"
    timeout: 30s

  hr_management:
    base_url: "http://hr-management:8003"
    timeout: 30s

  engineering_analytics:
    base_url: "http://engineering-analytics:8001"
    timeout: 30s

  workforce_wellbeing:
    base_url: "http://workforce-wellbeing:8006"
    timeout: 30s

  system_integration:
    base_url: "http://system-integration:8005"
    timeout: 30s

# External services (host machine via host.docker.internal)
external_services:
  ollama:
    base_url: "http://host.docker.internal:11434"
    timeout: 600s  # LLM requests can take longer

  docker_registry:
    base_url: "http://host.docker.internal:5006"
    timeout: 60s

  frontend:
    base_url: "http://host.docker.internal:3000"
    timeout: 30s
    websocket: true  # Enable WebSocket upgrade for HMR
